digraph rug {
  rankdir=LR;
  node [shape = doublecircle]; EXIT;
  node [shape = circle];

  START -> CALC_ACTION [ label = "vm>D,ACT>P" ];

  CALC_ACTION -> ALIVE [ label = "ACT>[CRUP],vm:[UC]" ];
  CALC_ACTION -> EXIT [ label = "ACT>D,vm:D" ];
  CALC_ACTION -> STOP [ label = "ACT>D" ];
  CALC_ACTION -> CREATEVM [ label = "ACT>[CRUP],vm:D" ];
  CALC_ACTION -> CHECKBOOT [ label = "ACT>[CRUP],vm:B" ];

  ALIVE -> CREATEVM [ label = "vm>D" ];
  ALIVE -> CONFIG [ label = "ACT:[CU],vm:[UC]" ];
  ALIVE -> STATS [ label = "ACT:R,vm:C" ];
  ALIVE -> CALC_ACTION [ label = "ACT:P,vm>[UC]" ];

  CREATEVM -> CHECKBOOT

  CHECKBOOT -> CONFIG [ label = "vm>U" ]
  CHECKBOOT -> CALC_ACTION [ label = "vm:[DBCR]" ]

  CONFIG -> STOP [ label = "vm:[RD]" ];
  CONFIG -> STATS [ label = "ACT:R,vm>C" ];
  CONFIG -> CALC_ACTION [ label = "ACT>P,vm>C" ];

  STATS -> CALC_ACTION [ label = "ACT>P" ];

  STOP -> EXIT [ label = "ACT:D,vm>D" ];
  STOP -> CREATEVM [ label = "vm>D" ];

}
